# ExamGrader Configuration File
# This file contains all customizable prompts and parameters
# Modify this file to customize prompts and settings

# API Configuration
# OpenAI compatible API (e.g., Alibaba Cloud DashScope)
# API key can be set via DASHSCOPE_API_KEY environment variable or here
api:
  base_url: "https://dashscope-intl.aliyuncs.com/compatible-mode/v1"
  model_name: "qwen3-vl-plus"
  api_key: null  # Set to your API key, or use DASHSCOPE_API_KEY env var
  timeout: 60
  max_tokens: 2000  # Maximum tokens for response (should be large enough for complete answers)
  temperature: 0.2  # Set to 0 for deterministic, reproducible grading (0.0-2.0, lower = more deterministic)
  top_p: 1.0  # Nucleus sampling parameter (0.0-1.0, 1.0 = consider all tokens, usually used with temperature)
  seed: null  # Fixed seed for reproducibility (set a number for deterministic outputs, null = random)

# Screenshot Configuration
screenshot:
  default_interval: 5.0  # seconds
  default_duration: 30.0  # seconds
  save_dir: "./screenshots"
  # Monitor index: 1 for first monitor, 2 for second, etc.
  # Use 0 for all monitors combined (full desktop spanning)
  # Use null/leave empty to use first monitor (default)
  default_monitor: null  # null means first monitor (index 1)
  # Default region for fixed area capture (leave null for full screen)
  # Format: [left, top, width, height]
  # Example: [100, 100, 800, 600] captures 800x600 area starting at (100, 100)
  default_region: "80,100,900,400"  # null means full screen

# Grading Prompts
# Customize these prompts to change how the model grades answers
prompts:
  # System message sent to the model
  system_message: |
    ä½ æ˜¯ä¸€ä¸ªè¯•å·è¯„åˆ†åŠ©æ‰‹ã€‚ä½ çš„ä»»åŠ¡æ˜¯ï¼š
    1. åˆ†æå­¦ç”Ÿçš„ç­”æ¡ˆå›¾ç‰‡ï¼Œç†è§£å­¦ç”Ÿæ‰‹å†™å­—è¿¹çš„å†…å®¹
    2. ä»”ç»†é˜…è¯»å‚è€ƒç­”æ¡ˆä¸­çš„è¯„åˆ†æ ‡å‡†å’Œè¦æ±‚
    3. æ ¹æ®å‚è€ƒç­”æ¡ˆä¸­çš„è¯„åˆ†æ ‡å‡†ç»™å‡ºç›¸åº”çš„åˆ†æ•°
    4. ç®€è¦è¯´æ˜ä½ çš„è¯„åˆ†ç†ç”±ï¼Œä¸ç”¨åˆ†æä¸ºä»€ä¹ˆæ­£ç¡®ï¼Œåªè¯´æ˜ä¸ºä»€ä¹ˆæ‰£åˆ†

    âš ï¸ é‡è¦æç¤º - å¿…é¡»ä¸¥æ ¼éµå®ˆï¼š
    - **å¿…é¡»ä¸¥æ ¼æŒ‰ç…§å‚è€ƒç­”æ¡ˆä¸­çš„"è¯„åˆ†æ ‡å‡†"éƒ¨åˆ†è¿›è¡Œè¯„åˆ†**
    - **ä»”ç»†é˜…è¯»å‚è€ƒç­”æ¡ˆä¸­çš„"è¯„åˆ†ç»†åˆ™"ï¼Œé€é¡¹å¯¹ç…§å­¦ç”Ÿç­”æ¡ˆ**
    - **ä¸¥æ ¼æŒ‰ç…§å‚è€ƒç­”æ¡ˆä¸­çš„"æ‰£åˆ†è§„åˆ™"æ‰§è¡Œ**
    - **åˆ†æ•°èŒƒå›´å®Œå…¨ç”±å‚è€ƒç­”æ¡ˆä¸­çš„"æ»¡åˆ†"ç¡®å®šï¼Œä¸è¦å‡è®¾æ˜¯ç™¾åˆ†åˆ¶**
    - **å¦‚æœå‚è€ƒç­”æ¡ˆä¸­æœ‰å…·ä½“çš„ç»™åˆ†/æ‰£åˆ†è¯´æ˜ï¼Œå¿…é¡»ä¸¥æ ¼æŒ‰ç…§æ‰§è¡Œ**

    è¯·æŒ‰ä»¥ä¸‹æ ¼å¼å›å¤ï¼š
    è¯†åˆ«çš„å­¦ç”Ÿç­”æ¡ˆ: [ä»å›¾ç‰‡ä¸­è¯†åˆ«å‡ºçš„å­¦ç”Ÿç­”æ¡ˆå†…å®¹]
    åˆ†æ•°: [å®é™…åˆ†æ•°]
    è¯„åˆ†ç†ç”±: [ç®€è¦è¯´æ˜]

  # User message template
  # {reference_answer_section} will be replaced with formatted reference answer if provided
  user_message_template: |
    è¯·å¯¹è¿™åå­¦ç”Ÿçš„ç­”æ¡ˆè¿›è¡Œè¯„åˆ†ã€‚
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ“‹ ä»¥ä¸‹æ˜¯å‚è€ƒç­”æ¡ˆå’Œè¯„åˆ†æ ‡å‡†ï¼ˆè¿™æ˜¯è¯„åˆ†çš„å”¯ä¸€ä¾æ®ï¼‰ï¼š
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    {reference_answer_section}
    
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    ğŸ“ è¯„åˆ†æ­¥éª¤ï¼š
    1. å…ˆè¯†åˆ«å¹¶è¾“å‡ºå­¦ç”Ÿçš„ç­”æ¡ˆå†…å®¹
    2. é€é¡¹å¯¹ç…§å‚è€ƒç­”æ¡ˆä¸­çš„"è¯„åˆ†æ ‡å‡†"éƒ¨åˆ†
    3. ä¸¥æ ¼æŒ‰ç…§"è¯„åˆ†ç»†åˆ™"ä¸­çš„æ¯ä¸€æ¡è§„åˆ™ç»™åˆ†
    4. ä¸¥æ ¼éµå¾ª"æ‰£åˆ†è§„åˆ™"
    5. æ ¹æ®å¯¹ç…§ç»“æœç»™å‡ºæœ€ç»ˆåˆ†æ•°
    6. è¯´æ˜æ‰£åˆ†åŸå› ï¼ˆåªè¯´æ˜ä¸ºä»€ä¹ˆæ‰£åˆ†ï¼Œä¸ç”¨è¯´æ˜ä¸ºä»€ä¹ˆæ­£ç¡®ï¼‰

  # Format for reference answer section
  # {reference_answer} will be replaced with actual reference answer
  reference_answer_format: |
    
    âš ï¸ å‚è€ƒç­”æ¡ˆå’Œè¯„åˆ†æ ‡å‡†ï¼ˆè¿™æ˜¯è¯„åˆ†çš„å”¯ä¸€ä¾æ®ï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆï¼‰ï¼š
    ```markdown
    {reference_answer}
    ```
    
    è¯·ç‰¹åˆ«æ³¨æ„ï¼š
    - ä¸¥æ ¼æŒ‰ç…§ä¸Šè¿°å‚è€ƒç­”æ¡ˆä¸­çš„"è¯„åˆ†æ ‡å‡†"å’Œ"è¯„åˆ†ç»†åˆ™"è¿›è¡Œè¯„åˆ†
    - ä¸¥æ ¼éµå®ˆ"æ‰£åˆ†è§„åˆ™"
    - ä¸è¦è‡ªè¡Œæ·»åŠ è¯„åˆ†è§„åˆ™

  # Format for question context
  # {question_context} will be replaced with actual question context
  question_context_format: |
    
    é¢˜ç›®ä¸Šä¸‹æ–‡ï¼š{question_context}

# Response Parsing Configuration
# Adjust these if you need to parse different response formats
parsing:
  student_answer_pattern: "(?:è¯†åˆ«çš„å­¦ç”Ÿç­”æ¡ˆ|Recognized Student Answer|å­¦ç”Ÿç­”æ¡ˆ)[ï¼š:]\\s*(.+?)(?=\\n\\s*(?:åˆ†æ•°|Score)|\\n\\s*(?:è¯„åˆ†ç†ç”±|Reasoning)|$)"  # Regex pattern to extract recognized student answer
  score_pattern: "(?:åˆ†æ•°|Score):\\s*(\\d+(?:\\.\\d+)?)"  # Regex pattern to extract score (supports both Chinese and English, and decimal scores)
  reasoning_pattern: "(?:è¯„åˆ†ç†ç”±|Reasoning):?\\s*(.+)"  # Regex pattern to extract reasoning (supports both Chinese and English)
  score_min: 0  # Minimum valid score (will be overridden if specified in reference answer)
  score_max: null  # Maximum valid score (null means no upper limit, will use reference answer if specified)

# Output Configuration
output:
  default_dir: "./results"
  save_screenshots: false
  auto_save_records: true  # Automatically save grading records in periodic mode
  records_dir: "./results"  # Directory to save grading records (defaults to default_dir if not specified)

# Reference Answer Configuration
reference_answer:
  default_file: "examples/reference_answer.md"  # Default reference answer file path (set to null to disable)
